version: 0.2

phases: 
    install:
        runtime-versions:
            nodejs: 10
        commands:
            - echo "installing something"
    pre_build:
        commands: 
            - echo "This is the pre build phase"
    build:
        commands:
            - echo "This is the build phase"
            - echo "Here we can run some tests"
            - grep -Fq "Welcome" index.html
    post_build:
        commands:
            - echo "This is the post build phase"
            - zip -r app.zip . -x ".*" -x "*.git/*"
            - echo "Pushing app.zip to S3"
            - aws deploy push --application-name CodeDeployDemo --s3-location s3://mycodebuildbucket-2024/codedeploy-demo/app.zip --ignore-hidden-files --region us-east-1 --profile aws-devops
            
artifacts:
  files:
    - '**/*'
  name: DevOpsAppArtifacts             
            
